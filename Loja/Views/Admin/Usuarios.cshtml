@model IEnumerable<Loja.Models.ApplicationUser>
@{
    ViewBag.Title = "Usuarios";
    Layout = "~/Views/Shared/_AdminPage.cshtml";
}
<h2>Usuários</h2>
<div class="table-responsive">
    <table class="table table-striped table-sm">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Nome)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Telefone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Ativo)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CPF)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DataNascimento)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Nome)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Telefone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Ativo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CPF)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DataNascimento)
                </td>
                <td>
                    @Html.ActionLink("Editar", "EditaUsuario", new { id = item.ClienteID }) |
                    @if(@User.Identity.Name != item.Email)
                    {
                        @Html.ActionLink("Mudar situação", "MudaSituacao", new { id = item.ClienteID })
                    }
                </td>
            </tr>
        }

    </table>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/inputmask")
    <script>
        $(document).ready(function () {
            $("#CPF").inputmask({ "mask": "999.999.999-99", reverse: true });
            $("#Telefone").inputmask({ "mask": "(99) 9999-99999" });
            $("#DataNascimento").inputmask({ "mask": "99/99/9999" });
            $("#DataCadastro").inputmask({ "mask": "99/99/9999" });
        });
    </script>

}
